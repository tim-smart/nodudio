/*
 The MIT license.
 @copyright Copyright (c) 2010 LearnBoost <dev@learnboost.com>
 The MIT license.
 @copyright Copyright (c) 2010 LearnBoost <dev@learnboost.com>
 The MIT license.
 @copyright Copyright (c) 2010 LearnBoost <dev@learnboost.com>
 The MIT license.
 @copyright Copyright (c) 2010 LearnBoost <dev@learnboost.com>
 The MIT license.
 @copyright Copyright (c) 2010 LearnBoost <dev@learnboost.com>
 The MIT license.
 @copyright Copyright (c) 2010 LearnBoost <dev@learnboost.com>
 The MIT license.
 @copyright Copyright (c) 2010 LearnBoost <dev@learnboost.com>
 The MIT license.
 @copyright Copyright (c) 2010 LearnBoost <dev@learnboost.com>
 The MIT license.
 @copyright Copyright (c) 2010 LearnBoost <dev@learnboost.com>
 The MIT license.
 @copyright Copyright (c) 2010 LearnBoost <dev@learnboost.com>
 The MIT license.
 @copyright Copyright (c) 2010 LearnBoost <dev@learnboost.com>
*/
(function(){window.nodudio=window.ndo={socket:null,EventEmitter:null}})();(function(){var i=function(){this.listeners={}};i.prototype.emit=function(){var y=Array.prototype.slice.call(arguments,0),v=y.shift();this.listeners[v]&&utils.each(this.listeners[v],function(a){a.apply(null,y)});return true};i.prototype.on=function(y,v){return this.listeners[y]=v};nodudio.EventEmitter=i})();
(function(){function i(a,c){this.target=a;this.remoteTypeCache={};this.remoteInstanceCache={};this.remoteFunctionCache={};this.localFunctionCache={};this.bridgeID=i.nextBridgeID++;this.name=c;this.nextLocalFuncID=0;i.instances[this.name]=this;i.idMap[this.bridgeID]=this;return this}function y(a){this.fb_instance_id=a;return this}this.io={version:"0.6",setPath:function(a){this.path=/\/$/.test(a)?a:a+"/";if("WebSocket"in window)WebSocket.__swfLocation=a+"lib/vendor/web-socket-js/WebSocketMain.swf"}};
if("jQuery"in this)jQuery.io=this.io;(function(){var a=false;io.util={ios:false,load:function(c){if(document.readyState=="complete"||a)return c();"attachEvent"in window?window.attachEvent("onload",c):window.addEventListener("load",c,false)},inherit:function(c,b){for(var e in b.prototype)c.prototype[e]=b.prototype[e]},indexOf:function(c,b,e){var h=c.length;for(e=e<0?Math.max(0,h+e):e||0;e<h;e++)if(c[e]===b)return e;return-1},isArray:function(c){return Object.prototype.toString.call(c)==="[object Array]"}};
io.util.ios=/iphone|ipad/i.test(navigator.userAgent);io.util.android=/android/i.test(navigator.userAgent);io.util.opera=/opera/i.test(navigator.userAgent);io.util.load(function(){a=true})})();(function(){Transport=io.Transport=function(a,c){this.base=a;this.options={timeout:15E3};for(var b in c)if(this.options.hasOwnProperty(b))this.options[b]=c[b]};Transport.prototype.send=function(){throw new Error("Missing send() implementation");};Transport.prototype.connect=function(){throw new Error("Missing connect() implementation");
};Transport.prototype.disconnect=function(){throw new Error("Missing disconnect() implementation");};Transport.prototype._encode=function(a){var c="",b;a=io.util.isArray(a)?a:[a];for(var e=0,h=a.length;e<h;e++){if(a[e]===null||a[e]===undefined)b="";else{b=a[e];if(Object.prototype.toString.call(b)=="[object Object]")if("JSON"in window)b="~j~"+JSON.stringify(b);else{"console"in window&&console.error&&console.error("Trying to encode as JSON, but JSON.stringify is missing.");b='{ "$error": "Invalid message" }'}else b=
String(b)}b=b;c+="~m~"+b.length+"~m~"+b}return c};Transport.prototype._decode=function(a){var c=[],b,e;do{if(a.substr(0,3)!=="~m~")return c;a=a.substr(3);b="";for(var h=0,p=a.length;h<p;h++){e=Number(a.substr(h,1));if(a.substr(h,1)==e)b+=e;else{a=a.substr(b.length+3);b=Number(b);break}}c.push(a.substr(0,b));a=a.substr(b)}while(a!=="");return c};Transport.prototype._onData=function(a){this._setTimeout();if((a=this._decode(a))&&a.length)for(var c=0,b=a.length;c<b;c++)this._onMessage(a[c])};Transport.prototype._setTimeout=
function(){var a=this;this._timeout&&clearTimeout(this._timeout);this._timeout=setTimeout(function(){a._onTimeout()},this.options.timeout)};Transport.prototype._onTimeout=function(){this._onDisconnect()};Transport.prototype._onMessage=function(a){if(this.sessionid)if(a.substr(0,3)=="~h~")this._onHeartbeat(a.substr(3));else a.substr(0,3)=="~j~"?this.base._onMessage(JSON.parse(a.substr(3))):this.base._onMessage(a);else{this.sessionid=a;this._onConnect()}};Transport.prototype._onHeartbeat=function(a){this.send("~h~"+
a)};Transport.prototype._onConnect=function(){this.connected=true;this.connecting=false;this.base._onConnect();this._setTimeout()};Transport.prototype._onDisconnect=function(){this.connected=this.connecting=false;this.sessionid=null;this.base._onDisconnect()};Transport.prototype._prepareUrl=function(){return(this.base.options.secure?"https":"http")+"://"+this.base.host+":"+this.base.options.port+"/"+this.base.options.resource+"/"+this.type+(this.sessionid?"/"+this.sessionid:"/")}})();(function(){var a=
new Function,c=function(e){if("XDomainRequest"in window&&e)return new XDomainRequest;if("XMLHttpRequest"in window)return new XMLHttpRequest;if(!e){try{return new ActiveXObject("MSXML2.XMLHTTP")}catch(h){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(p){}}return false},b=io.Transport.XHR=function(){io.Transport.apply(this,arguments);this._sendBuffer=[]};io.util.inherit(b,io.Transport);b.prototype.connect=function(){this._get();return this};b.prototype._checkSend=function(){if(!this._posting&&
this._sendBuffer.length){var e=this._encode(this._sendBuffer);this._sendBuffer=[];this._send(e)}};b.prototype.send=function(e){io.util.isArray(e)?this._sendBuffer.push.apply(this._sendBuffer,e):this._sendBuffer.push(e);this._checkSend();return this};b.prototype._send=function(e){var h=this;this._posting=true;this._sendXhr=this._request("send","POST");this._sendXhr.onreadystatechange=function(){var p;if(h._sendXhr.readyState==4){h._sendXhr.onreadystatechange=a;try{p=h._sendXhr.status}catch(t){}h._posting=
false;p==200?h._checkSend():h._onDisconnect()}};this._sendXhr.send("data="+encodeURIComponent(e))};b.prototype.disconnect=function(){this._onDisconnect();return this};b.prototype._onDisconnect=function(){if(this._xhr){this._xhr.onreadystatechange=this._xhr.onload=a;this._xhr.abort();this._xhr=null}if(this._sendXhr){this._sendXhr.onreadystatechange=this._sendXhr.onload=a;this._sendXhr.abort();this._sendXhr=null}this._sendBuffer=[];io.Transport.prototype._onDisconnect.call(this)};b.prototype._request=
function(e,h,p){var t=c(this.base._isXDomain());if(p)t.multipart=true;t.open(h||"GET",this._prepareUrl()+(e?"/"+e:""));h=="POST"&&t.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8");return t};b.check=function(){try{if(c())return true}catch(e){}return false};b.xdomainCheck=function(){return b.check(true)};b.request=c})();(function(){var a=io.Transport.websocket=function(){io.Transport.apply(this,arguments)};io.util.inherit(a,io.Transport);a.prototype.type="websocket";
a.prototype.connect=function(){var c=this;this.socket=new WebSocket(this._prepareUrl());this.socket.onmessage=function(b){c._onData(b.data)};this.socket.onclose=function(){c._onClose()};return this};a.prototype.send=function(c){this.socket.send(this._encode(c));return this};a.prototype.disconnect=function(){this.socket.close();return this};a.prototype._onClose=function(){this._onDisconnect();return this};a.prototype._prepareUrl=function(){return(this.base.options.secure?"wss":"ws")+"://"+this.base.host+
":"+this.base.options.port+"/"+this.base.options.resource+"/"+this.type+(this.sessionid?"/"+this.sessionid:"")};a.check=function(){return"WebSocket"in window&&!("__initialize"in WebSocket)};a.xdomainCheck=function(){return true}})();(function(){var a=io.Transport.flashsocket=function(){io.Transport.websocket.apply(this,arguments)};io.util.inherit(a,io.Transport.websocket);a.prototype.type="flashsocket";a.prototype._onClose=function(){if(this.base.connected)return io.Transport.websocket.prototype._onClose.call(this);
else{this.base.options.transports.splice(io.util.indexOf(this.base.options.transports,"flashsocket"),1);this.base.transport=this.base.getTransport();this.base.connect()}};a.check=function(){if(!("path"in io))throw new Error("The `flashsocket` transport requires that you call io.setPath() with the path to the socket.io client dir.");if(io.util.opera)return false;if("navigator"in window&&"plugins"in navigator&&navigator.plugins["Shockwave Flash"])return!!navigator.plugins["Shockwave Flash"].description;
if("ActiveXObject"in window)try{return!!(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(c){}return false};a.xdomainCheck=function(){return true}})();(function(){var a=io.Transport.htmlfile=function(){io.Transport.XHR.apply(this,arguments)};io.util.inherit(a,io.Transport.XHR);a.prototype.type="htmlfile";a.prototype._get=function(){var c=this;this._open();window.attachEvent("onunload",function(){c._destroy()})};a.prototype._open=function(){this._doc=new ActiveXObject("htmlfile");
this._doc.open();this._doc.write("<html></html>");this._doc.parentWindow.s=this;this._doc.close();var c=this._doc.createElement("div");this._doc.body.appendChild(c);this._iframe=this._doc.createElement("iframe");c.appendChild(this._iframe);this._iframe.src=this._prepareUrl()+"/"+ +new Date};a.prototype._=function(c,b){this._onData(c);var e=b.getElementsByTagName("script")[0];e.parentNode.removeChild(e)};a.prototype._destroy=function(){this._iframe.src="about:blank";this._doc=null;CollectGarbage()};
a.prototype.disconnect=function(){this._destroy();return io.Transport.XHR.prototype.disconnect.call(this)};a.check=function(){if("ActiveXObject"in window)try{return new ActiveXObject("htmlfile")&&io.Transport.XHR.check()}catch(c){}return false};a.xdomainCheck=function(){return false}})();(function(){var a=io.Transport["xhr-multipart"]=function(){io.Transport.XHR.apply(this,arguments)};io.util.inherit(a,io.Transport.XHR);a.prototype.type="xhr-multipart";a.prototype._get=function(){var c=this;this._xhr=
this._request("","GET",true);this._xhr.onreadystatechange=function(){c._xhr.readyState==3&&c._onData(c._xhr.responseText)};this._xhr.send()};a.check=function(){return"XMLHttpRequest"in window&&"multipart"in XMLHttpRequest.prototype};a.xdomainCheck=function(){return true}})();(function(){var a=new Function,c=io.Transport["xhr-polling"]=function(){io.Transport.XHR.apply(this,arguments)};io.util.inherit(c,io.Transport.XHR);c.prototype.type="xhr-polling";c.prototype.connect=function(){if(io.util.ios||
io.util.android){var b=this;io.util.load(function(){setTimeout(function(){io.Transport.XHR.prototype.connect.call(b)},10)})}else io.Transport.XHR.prototype.connect.call(this)};c.prototype._get=function(){var b=this;this._xhr=this._request(+new Date,"GET");if("onload"in this._xhr)this._xhr.onload=function(){b._onData(this.responseText);b._get()};else this._xhr.onreadystatechange=function(){var e;if(b._xhr.readyState==4){b._xhr.onreadystatechange=a;try{e=b._xhr.status}catch(h){}if(e==200){b._onData(b._xhr.responseText);
b._get()}else b._onDisconnect()}};this._xhr.send()};c.check=function(){return io.Transport.XHR.check()};c.xdomainCheck=function(){return io.Transport.XHR.xdomainCheck()}})();io.JSONP=[];JSONPPolling=io.Transport["jsonp-polling"]=function(){io.Transport.XHR.apply(this,arguments);this._insertAt=document.getElementsByTagName("script")[0];this._index=io.JSONP.length;io.JSONP.push(this)};io.util.inherit(JSONPPolling,io.Transport["xhr-polling"]);JSONPPolling.prototype.type="jsonp-polling";JSONPPolling.prototype._send=
function(a){function c(){b();e._posting=false;e._checkSend()}function b(){e._iframe&&e._form.removeChild(e._iframe);try{m=document.createElement('<iframe name="'+e._iframeId+'">')}catch(I){m=document.createElement("iframe");m.name=e._iframeId}m.id=e._iframeId;e._form.appendChild(m);e._iframe=m}var e=this;if(!("_form"in this)){var h=document.createElement("FORM"),p=document.createElement("TEXTAREA"),t=this._iframeId="socket_io_iframe_"+this._index,m;h.style.position="absolute";h.style.top="-1000px";
h.style.left="-1000px";h.target=t;h.method="POST";h.action=this._prepareUrl()+"/"+ +new Date+"/"+this._index;p.name="data";h.appendChild(p);this._insertAt.parentNode.insertBefore(h,this._insertAt);document.body.appendChild(h);this._form=h;this._area=p}b();this._posting=true;this._area.value=a;try{this._form.submit()}catch(w){}if(this._iframe.attachEvent)m.onreadystatechange=function(){e._iframe.readyState=="complete"&&c()};else this._iframe.onload=c};JSONPPolling.prototype._get=function(){var a=this,
c=document.createElement("SCRIPT");if(this._script){this._script.parentNode.removeChild(this._script);this._script=null}c.async=true;c.src=this._prepareUrl()+"/"+ +new Date+"/"+this._index;c.onerror=function(){a._onDisconnect()};this._insertAt.parentNode.insertBefore(c,this._insertAt);this._script=c};JSONPPolling.prototype._=function(){this._onData.apply(this,arguments);this._get();return this};JSONPPolling.check=function(){return true};JSONPPolling.xdomainCheck=function(){return true};(function(){var a=
io.Socket=function(c,b){this.host=c||document.domain;this.options={secure:false,document:document,port:document.location.port||80,resource:"socket.io",transports:["websocket","flashsocket","htmlfile","xhr-multipart","xhr-polling","jsonp-polling"],transportOptions:{"xhr-polling":{timeout:25E3},"jsonp-polling":{timeout:25E3}},rememberTransport:false};for(var e in b)if(this.options.hasOwnProperty(e))this.options[e]=b[e];this.connecting=this.connected=false;this._events={};this.transport=this.getTransport();
!this.transport&&"console"in window&&console.error("No transport available")};a.prototype.getTransport=function(){var c=this.options.transports,b;if(this.options.rememberTransport)if(b=this.options.document.cookie.match("(?:^|;)\\s*socket.io=([^;]*)"))c=[decodeURIComponent(b[1])];b=0;for(var e;e=c[b];b++)if(io.Transport[e]&&io.Transport[e].check()&&(!this._isXDomain()||io.Transport[e].xdomainCheck()))return new io.Transport[e](this,this.options.transportOptions[e]||{});return null};a.prototype.connect=
function(){if(this.transport&&!this.connected){this.connecting&&this.disconnect();this.connecting=true;this.transport.connect()}return this};a.prototype.send=function(c){if(!this.transport||!this.transport.connected)return this._queue(c);this.transport.send(c);return this};a.prototype.disconnect=function(){this.transport.disconnect();return this};a.prototype.on=function(c,b){c in this._events||(this._events[c]=[]);this._events[c].push(b);return this};a.prototype.fire=function(c,b){if(c in this._events)for(var e=
0,h=this._events[c].length;e<h;e++)this._events[c][e].apply(this,b===undefined?[]:b);return this};a.prototype.removeEvent=function(c,b){if(c in this._events)for(var e=0,h=this._events[c].length;e<h;e++)this._events[c][e]==b&&this._events[c].splice(e,1);return this};a.prototype._queue=function(c){if(!("_queueStack"in this))this._queueStack=[];this._queueStack.push(c);return this};a.prototype._doQueue=function(){if(!("_queueStack"in this)||!this._queueStack.length)return this;this.transport.send(this._queueStack);
this._queueStack=[];return this};a.prototype._isXDomain=function(){return this.host!==document.domain};a.prototype._onConnect=function(){this.connected=true;this.connecting=false;this._doQueue();if(this.options.rememberTransport)this.options.document.cookie="socket.io="+encodeURIComponent(this.transport.type);this.fire("connect")};a.prototype._onMessage=function(c){this.fire("message",[c])};a.prototype._onDisconnect=function(){var c=this.connected;this.connecting=this.connected=false;this._queueStack=
[];c&&this.fire("disconnect")};a.prototype.addListener=a.prototype.addEvent=a.prototype.addEventListener=a.prototype.on})();var v=function(){function a(){if(!G){try{var d=n.getElementsByTagName("body")[0].appendChild(n.createElement("span"));d.parentNode.removeChild(d)}catch(f){return}G=true;d=M.length;for(var g=0;g<d;g++)M[g]()}}function c(d){if(G)d();else M[M.length]=d}function b(d){if(typeof x.addEventListener!=r)x.addEventListener("load",d,false);else if(typeof n.addEventListener!=r)n.addEventListener("load",
d,false);else if(typeof x.attachEvent!=r)ea(x,"onload",d);else if(typeof x.onload=="function"){var f=x.onload;x.onload=function(){f();d()}}else x.onload=d}function e(){var d=n.getElementsByTagName("body")[0],f=n.createElement(A);f.setAttribute("type",N);var g=d.appendChild(f);if(g){var j=0;(function(){if(typeof g.GetVariable!=r){var k=g.GetVariable("$version");if(k){k=k.split(" ")[1].split(",");l.pv=[parseInt(k[0],10),parseInt(k[1],10),parseInt(k[2],10)]}}else if(j<10){j++;setTimeout(arguments.callee,
10);return}d.removeChild(f);g=null;h()})()}else h()}function h(){var d=D.length;if(d>0)for(var f=0;f<d;f++){var g=D[f].id,j=D[f].callbackFn,k={success:false,id:g};if(l.pv[0]>0){var q=z(g);if(q)if(O(D[f].swfVersion)&&!(l.wk&&l.wk<312)){H(g,true);if(j){k.success=true;k.ref=p(g);j(k)}}else if(D[f].expressInstall&&t()){k={};k.data=D[f].expressInstall;k.width=q.getAttribute("width")||"0";k.height=q.getAttribute("height")||"0";if(q.getAttribute("class"))k.styleclass=q.getAttribute("class");if(q.getAttribute("align"))k.align=
q.getAttribute("align");var o={};q=q.getElementsByTagName("param");for(var u=q.length,s=0;s<u;s++)if(q[s].getAttribute("name").toLowerCase()!="movie")o[q[s].getAttribute("name")]=q[s].getAttribute("value");m(k,o,g,j)}else{w(q);j&&j(k)}}else{H(g,true);if(j){if((g=p(g))&&typeof g.SetVariable!=r){k.success=true;k.ref=g}j(k)}}}}function p(d){var f=null;if((d=z(d))&&d.nodeName=="OBJECT")if(typeof d.SetVariable!=r)f=d;else if(d=d.getElementsByTagName(A)[0])f=d;return f}function t(){return!P&&O("6.0.65")&&
(l.win||l.mac)&&!(l.wk&&l.wk<312)}function m(d,f,g,j){P=true;V=j||null;Y={success:false,id:g};var k=z(g);if(k){if(k.nodeName=="OBJECT"){K=I(k);Q=null}else{K=k;Q=g}d.id=Z;if(typeof d.width==r||!/%$/.test(d.width)&&parseInt(d.width,10)<310)d.width="310";if(typeof d.height==r||!/%$/.test(d.height)&&parseInt(d.height,10)<137)d.height="137";n.title=n.title.slice(0,47)+" - Flash Player Installation";j=l.ie&&l.win?"ActiveX":"PlugIn";j="MMredirectURL="+x.location.toString().replace(/&/g,"%26")+"&MMplayerType="+
j+"&MMdoctitle="+n.title;if(typeof f.flashvars!=r)f.flashvars+="&"+j;else f.flashvars=j;if(l.ie&&l.win&&k.readyState!=4){j=n.createElement("div");g+="SWFObjectNew";j.setAttribute("id",g);k.parentNode.insertBefore(j,k);k.style.display="none";(function(){k.readyState==4?k.parentNode.removeChild(k):setTimeout(arguments.callee,10)})()}W(d,f,g)}}function w(d){if(l.ie&&l.win&&d.readyState!=4){var f=n.createElement("div");d.parentNode.insertBefore(f,d);f.parentNode.replaceChild(I(d),f);d.style.display="none";
(function(){d.readyState==4?d.parentNode.removeChild(d):setTimeout(arguments.callee,10)})()}else d.parentNode.replaceChild(I(d),d)}function I(d){var f=n.createElement("div");if(l.win&&l.ie)f.innerHTML=d.innerHTML;else if(d=d.getElementsByTagName(A)[0])if(d=d.childNodes)for(var g=d.length,j=0;j<g;j++)!(d[j].nodeType==1&&d[j].nodeName=="PARAM")&&d[j].nodeType!=8&&f.appendChild(d[j].cloneNode(true));return f}function W(d,f,g){var j,k=z(g);if(l.wk&&l.wk<312)return j;if(k){if(typeof d.id==r)d.id=g;if(l.ie&&
l.win){var q="";for(var o in d)if(d[o]!=Object.prototype[o])if(o.toLowerCase()=="data")f.movie=d[o];else if(o.toLowerCase()=="styleclass")q+=' class="'+d[o]+'"';else if(o.toLowerCase()!="classid")q+=" "+o+'="'+d[o]+'"';o="";for(var u in f)if(f[u]!=Object.prototype[u])o+='<param name="'+u+'" value="'+f[u]+'" />';k.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+q+">"+o+"</object>";R[R.length]=d.id;j=z(d.id)}else{u=n.createElement(A);u.setAttribute("type",N);for(var s in d)if(d[s]!=
Object.prototype[s])if(s.toLowerCase()=="styleclass")u.setAttribute("class",d[s]);else s.toLowerCase()!="classid"&&u.setAttribute(s,d[s]);for(q in f)if(f[q]!=Object.prototype[q]&&q.toLowerCase()!="movie"){d=q;o=f[q];s=n.createElement("param");s.setAttribute("name",d);s.setAttribute("value",o);u.appendChild(s)}k.parentNode.replaceChild(u,k);j=u}}return j}function $(d){var f=z(d);if(f&&f.nodeName=="OBJECT")if(l.ie&&l.win){f.style.display="none";(function(){if(f.readyState==4){var g=z(d);if(g){for(var j in g)if(typeof g[j]==
"function")g[j]=null;g.parentNode.removeChild(g)}}else setTimeout(arguments.callee,10)})()}else f.parentNode.removeChild(f)}function z(d){var f=null;try{f=n.getElementById(d)}catch(g){}return f}function ea(d,f,g){d.attachEvent(f,g);J[J.length]=[d,f,g]}function O(d){var f=l.pv;d=d.split(".");d[0]=parseInt(d[0],10);d[1]=parseInt(d[1],10)||0;d[2]=parseInt(d[2],10)||0;return f[0]>d[0]||f[0]==d[0]&&f[1]>d[1]||f[0]==d[0]&&f[1]==d[1]&&f[2]>=d[2]?true:false}function aa(d,f,g,j){if(!(l.ie&&l.mac)){var k=n.getElementsByTagName("head")[0];
if(k){g=g&&typeof g=="string"?g:"screen";if(j)X=B=null;if(!B||X!=g){j=n.createElement("style");j.setAttribute("type","text/css");j.setAttribute("media",g);B=k.appendChild(j);if(l.ie&&l.win&&typeof n.styleSheets!=r&&n.styleSheets.length>0)B=n.styleSheets[n.styleSheets.length-1];X=g}if(l.ie&&l.win)B&&typeof B.addRule==A&&B.addRule(d,f);else B&&typeof n.createTextNode!=r&&B.appendChild(n.createTextNode(d+" {"+f+"}"))}}}function H(d,f){if(ba){var g=f?"visible":"hidden";if(G&&z(d))z(d).style.visibility=
g;else aa("#"+d,"visibility:"+g)}}function ca(d){return/[\\\"<>\.;]/.exec(d)!=null&&typeof encodeURIComponent!=r?encodeURIComponent(d):d}var r="undefined",A="object",N="application/x-shockwave-flash",Z="SWFObjectExprInst",x=window,n=document,E=navigator,da=false,M=[function(){da?e():h()}],D=[],R=[],J=[],K,Q,V,Y,G=false,P=false,B,X,ba=true,l=function(){var d=typeof n.getElementById!=r&&typeof n.getElementsByTagName!=r&&typeof n.createElement!=r,f=E.userAgent.toLowerCase(),g=E.platform.toLowerCase(),
j=g?/win/.test(g):/win/.test(f);g=g?/mac/.test(g):/mac/.test(f);f=/webkit/.test(f)?parseFloat(f.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false;var k=!+"\u000b1",q=[0,0,0],o=null;if(typeof E.plugins!=r&&typeof E.plugins["Shockwave Flash"]==A){if((o=E.plugins["Shockwave Flash"].description)&&!(typeof E.mimeTypes!=r&&E.mimeTypes[N]&&!E.mimeTypes[N].enabledPlugin)){da=true;k=false;o=o.replace(/^.*\s+(\S+\s+\S+$)/,"$1");q[0]=parseInt(o.replace(/^(.*)\..*$/,"$1"),10);q[1]=parseInt(o.replace(/^.*\.(.*)\s.*$/,
"$1"),10);q[2]=/[a-zA-Z]/.test(o)?parseInt(o.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof x.ActiveXObject!=r)try{var u=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(u)if(o=u.GetVariable("$version")){k=true;o=o.split(" ")[1].split(",");q=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)]}}catch(s){}return{w3:d,pv:q,wk:f,ie:k,win:j,mac:g}}();(function(){if(l.w3){if(typeof n.readyState!=r&&n.readyState=="complete"||typeof n.readyState==r&&(n.getElementsByTagName("body")[0]||n.body))a();
if(!G){typeof n.addEventListener!=r&&n.addEventListener("DOMContentLoaded",a,false);if(l.ie&&l.win){n.attachEvent("onreadystatechange",function(){if(n.readyState=="complete"){n.detachEvent("onreadystatechange",arguments.callee);a()}});x==top&&function(){if(!G){try{n.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}a()}}()}l.wk&&function(){G||(/loaded|complete/.test(n.readyState)?a():setTimeout(arguments.callee,0))}();b(a)}}})();(function(){l.ie&&l.win&&window.attachEvent("onunload",
function(){for(var d=J.length,f=0;f<d;f++)J[f][0].detachEvent(J[f][1],J[f][2]);d=R.length;for(f=0;f<d;f++)$(R[f]);for(var g in l)l[g]=null;l=null;for(var j in v)v[j]=null;v=null})})();return{registerObject:function(d,f,g,j){if(l.w3&&d&&f){var k={};k.id=d;k.swfVersion=f;k.expressInstall=g;k.callbackFn=j;D[D.length]=k;H(d,false)}else j&&j({success:false,id:d})},getObjectById:function(d){if(l.w3)return p(d)},embedSWF:function(d,f,g,j,k,q,o,u,s,L){var S={success:false,id:f};if(l.w3&&!(l.wk&&l.wk<312)&&
d&&f&&g&&j&&k){H(f,false);c(function(){g+="";j+="";var F={};if(s&&typeof s===A)for(var C in s)F[C]=s[C];F.data=d;F.width=g;F.height=j;C={};if(u&&typeof u===A)for(var T in u)C[T]=u[T];if(o&&typeof o===A)for(var U in o)if(typeof C.flashvars!=r)C.flashvars+="&"+U+"="+o[U];else C.flashvars=U+"="+o[U];if(O(k)){T=W(F,C,f);F.id==f&&H(f,true);S.success=true;S.ref=T}else if(q&&t()){F.data=q;m(F,C,f,L);return}else H(f,true);L&&L(S)})}else L&&L(S)},switchOffAutoHideShow:function(){ba=false},ua:l,getFlashPlayerVersion:function(){return{major:l.pv[0],
minor:l.pv[1],release:l.pv[2]}},hasFlashPlayerVersion:O,createSWF:function(d,f,g){if(l.w3)return W(d,f,g)},showExpressInstall:function(d,f,g,j){l.w3&&t()&&m(d,f,g,j)},removeSWF:function(d){l.w3&&$(d)},createCSS:function(d,f,g,j){l.w3&&aa(d,f,g,j)},addDomLoadEvent:c,addLoadEvent:b,getQueryParamValue:function(d){var f=n.location.search||n.location.hash;if(f){if(/\?/.test(f))f=f.split("?")[1];if(d==null)return ca(f);f=f.split("&");for(var g=0;g<f.length;g++)if(f[g].substring(0,f[g].indexOf("="))==d)return ca(f[g].substring(f[g].indexOf("=")+
1))}return""},expressInstallCallback:function(){if(P){var d=z(Z);if(d&&K){d.parentNode.replaceChild(K,d);if(Q){H(Q,true);if(l.ie&&l.win)K.style.display="block"}V&&V(Y)}P=false}}}}();i.TYPE_ASINSTANCE=1;i.TYPE_ASFUNCTION=2;i.TYPE_JSFUNCTION=3;i.TYPE_ANONYMOUS=4;i.initCallbacks={};i.userTypes={};i.addToUserTypes=function(){for(var a=0;a<arguments.length;a++)i.userTypes[arguments[a]]={typeName:arguments[a],enriched:false}};i.argsToArray=function(a){for(var c=[],b=0;b<a.length;b++)c[b]=a[b];return c};
i.addInitializationCallback=function(a,c){var b=i.instances[a];if(b!=undefined)c.call(b);else{b=i.initCallbacks[a];if(b==null)i.initCallbacks[a]=b=[];b.push(c)}};i.nextBridgeID=0;i.instances={};i.idMap={};i.refCount=0;i.extractBridgeFromID=function(a){return i.idMap[a>>16]};i.attachBridge=function(a,c){var b=new i(a,c);i[c]=b;var e=i.initCallbacks[c];if(e!=null){for(var h=0;h<e.length;h++)e[h].call(b);delete i.initCallbacks[c]}};i.blockedMethods={toString:true,get:true,set:true,call:true};i.prototype=
{root:function(){return this.deserialize(this.target.getRoot())},releaseASObjects:function(){return this.target.releaseASObjects()},releaseNamedASObject:function(a){return typeof a!="object"?false:this.target.releaseNamedASObject(a.fb_instance_id)},create:function(a){return this.deserialize(this.target.create(a))},makeID:function(a){return(this.bridgeID<<16)+a},getPropertyFromAS:function(a,c){if(i.refCount>0)throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");
else{i.refCount++;retVal=this.target.getPropFromAS(a,c);retVal=this.handleError(retVal);i.refCount--;return retVal}},setPropertyInAS:function(a,c,b){if(i.refCount>0)throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");else{i.refCount++;retVal=this.target.setPropInAS(a,c,this.serialize(b));retVal=this.handleError(retVal);i.refCount--;return retVal}},callASFunction:function(a,
c){if(i.refCount>0)throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");else{i.refCount++;retVal=this.target.invokeASFunction(a,this.serialize(c));retVal=this.handleError(retVal);i.refCount--;return retVal}},callASMethod:function(a,c,b){if(i.refCount>0)throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");
else{i.refCount++;b=this.serialize(b);retVal=this.target.invokeASMethod(a,c,b);retVal=this.handleError(retVal);i.refCount--;return retVal}},invokeLocalFunction:function(a,c){var b,e=this.localFunctionCache[a];if(e!=undefined)b=this.serialize(e.apply(null,this.deserialize(c)));return b},getTypeFromName:function(a){return this.remoteTypeCache[a]},createProxy:function(a,c){var b=this.getTypeFromName(c);y.prototype=b;b=new y(a);return this.remoteInstanceCache[a]=b},getProxy:function(a){return this.remoteInstanceCache[a]},
addTypeDataToCache:function(a){newType=new ASProxy(this,a.name);for(var c=a.accessors,b=0;b<c.length;b++)this.addPropertyToType(newType,c[b]);a=a.methods;for(b=0;b<a.length;b++)i.blockedMethods[a[b]]==undefined&&this.addMethodToType(newType,a[b]);return this.remoteTypeCache[newType.typeName]=newType},addPropertyToType:function(a,c){var b=c.charAt(0),e;if(b>="a"&&b<="z"){e="get"+b.toUpperCase()+c.substr(1);b="set"+b.toUpperCase()+c.substr(1)}else{e="get"+c;b="set"+c}a[b]=function(h){this.bridge.setPropertyInAS(this.fb_instance_id,
c,h)};a[e]=function(){return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id,c))}},addMethodToType:function(a,c){a[c]=function(){return this.bridge.deserialize(this.bridge.callASMethod(this.fb_instance_id,c,i.argsToArray(arguments)))}},getFunctionProxy:function(a){var c=this;if(this.remoteFunctionCache[a]==null)this.remoteFunctionCache[a]=function(){c.callASFunction(a,i.argsToArray(arguments))};return this.remoteFunctionCache[a]},getFunctionID:function(a){if(a.__bridge_id__==
undefined){a.__bridge_id__=this.makeID(this.nextLocalFuncID++);this.localFunctionCache[a.__bridge_id__]=a}return a.__bridge_id__},serialize:function(a){var c={},b=typeof a;if(b=="number"||b=="string"||b=="boolean"||b==null||b==undefined)c=a;else if(a instanceof Array){c=[];for(b=0;b<a.length;b++)c[b]=this.serialize(a[b])}else if(b=="function"){c.type=i.TYPE_JSFUNCTION;c.value=this.getFunctionID(a)}else if(a instanceof ASProxy){c.type=i.TYPE_ASINSTANCE;c.value=a.fb_instance_id}else{c.type=i.TYPE_ANONYMOUS;
c.value=a}return c},deserialize:function(a){var c,b=typeof a;if(b=="number"||b=="string"||b=="boolean"||a==null||a==undefined)c=this.handleError(a);else if(a instanceof Array){c=[];for(b=0;b<a.length;b++)c[b]=this.deserialize(a[b])}else if(b=="object"){for(b=0;b<a.newTypes.length;b++)this.addTypeDataToCache(a.newTypes[b]);for(var e in a.newRefs)this.createProxy(e,a.newRefs[e]);if(a.type==i.TYPE_PRIMITIVE)c=a.value;else if(a.type==i.TYPE_ASFUNCTION)c=this.getFunctionProxy(a.value);else if(a.type==
i.TYPE_ASINSTANCE)c=this.getProxy(a.value);else if(a.type==i.TYPE_ANONYMOUS)c=a.value}return c},addRef:function(a){this.target.incRef(a.fb_instance_id)},release:function(a){this.target.releaseRef(a.fb_instance_id)},handleError:function(a){if(typeof a=="string"&&a.indexOf("__FLASHERROR")==0){a=a.split("||");i.refCount>0&&i.refCount--;throw new Error(a[1]);}else return a}};ASProxy=function(a,c){this.bridge=a;this.typeName=c;return this};ASProxy.prototype={get:function(a){return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id,
a))},set:function(a,c){this.bridge.setPropertyInAS(this.fb_instance_id,a,c)},call:function(a,c){this.bridge.callASMethod(this.fb_instance_id,a,c)},addRef:function(){this.bridge.addRef(this)},release:function(){this.bridge.release(this)}};(function(){function a(){}if(!window.WebSocket){var c=window.console;c||(c={log:function(){},error:function(){}});if(v.hasFlashPlayerVersion("9.0.0")){location.protocol=="file:"&&c.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://...");
WebSocket=function(b,e,h,p,t){var m=this;m.readyState=WebSocket.CONNECTING;m.bufferedAmount=0;setTimeout(function(){WebSocket.__addTask(function(){m.__createFlash(b,e,h,p,t)})},1)};WebSocket.prototype.__createFlash=function(b,e,h,p,t){var m=this;m.__flash=WebSocket.__flash.create(b,e,h||null,p||0,t||null);m.__flash.addEventListener("open",function(){try{m.readyState=m.__flash.getReadyState();m.__timer&&clearInterval(m.__timer);if(window.opera)m.__timer=setInterval(function(){m.__handleMessages()},
500);m.onopen&&m.onopen()}catch(w){c.error(w.toString())}});m.__flash.addEventListener("close",function(){try{m.readyState=m.__flash.getReadyState();m.__timer&&clearInterval(m.__timer);m.onclose&&m.onclose()}catch(w){c.error(w.toString())}});m.__flash.addEventListener("message",function(){try{m.__handleMessages()}catch(w){c.error(w.toString())}});m.__flash.addEventListener("error",function(){try{m.__timer&&clearInterval(m.__timer);m.onerror&&m.onerror()}catch(w){c.error(w.toString())}});m.__flash.addEventListener("stateChange",
function(w){try{m.readyState=m.__flash.getReadyState();m.bufferedAmount=w.getBufferedAmount()}catch(I){c.error(I.toString())}})};WebSocket.prototype.send=function(b){if(this.__flash)this.readyState=this.__flash.getReadyState();if(!this.__flash||this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";b=this.__flash.send(encodeURIComponent(b));if(b<0)return true;else{this.bufferedAmount=b;return false}};WebSocket.prototype.close=function(){if(this.__flash){this.readyState=
this.__flash.getReadyState();if(this.readyState==WebSocket.OPEN){this.__flash.close();this.readyState=WebSocket.CLOSED;this.__timer&&clearInterval(this.__timer);this.onclose&&this.onclose()}}};WebSocket.prototype.addEventListener=function(b,e){if(!("__events"in this))this.__events={};if(!(b in this.__events)){this.__events[b]=[];if("function"==typeof this["on"+b]){this.__events[b].defaultHandler=this["on"+b];this["on"+b]=this.__createEventHandler(this,b)}}this.__events[b].push(e)};WebSocket.prototype.removeEventListener=
function(b,e){if(!("__events"in this))this.__events={};if(b in this.__events)for(var h=this.__events.length;h>-1;--h)if(e===this.__events[b][h]){this.__events[b].splice(h,1);break}};WebSocket.prototype.dispatchEvent=function(b){if(!("__events"in this))throw"UNSPECIFIED_EVENT_TYPE_ERR";if(!(b.type in this.__events))throw"UNSPECIFIED_EVENT_TYPE_ERR";for(var e=0,h=this.__events[b.type].length;e<h;++e){this.__events[b.type][e](b);if(b.cancelBubble)break}false!==b.returnValue&&"function"==typeof this.__events[b.type].defaultHandler&&
this.__events[b.type].defaultHandler(b)};WebSocket.prototype.__handleMessages=function(){for(var b=this.__flash.readSocketData(),e=0;e<b.length;e++){var h=decodeURIComponent(b[e]);try{if(this.onmessage){var p;if(window.MessageEvent){p=document.createEvent("MessageEvent");p.initMessageEvent("message",false,false,h,null,null,window,null)}else p={data:h};this.onmessage(p)}}catch(t){c.error(t.toString())}}};WebSocket.prototype.__createEventHandler=function(b,e){return function(h){var p=new a;p.initEvent(e,
true,true);p.target=p.currentTarget=b;for(var t in h)p[t]=h[t];b.dispatchEvent(p,arguments)}};a.prototype.cancelable=true;a.prototype.cancelBubble=false;a.prototype.preventDefault=function(){if(this.cancelable)this.returnValue=false};a.prototype.stopPropagation=function(){this.cancelBubble=true};a.prototype.initEvent=function(b,e,h){this.type=b;this.cancelable=h;this.timeStamp=new Date};WebSocket.CONNECTING=0;WebSocket.OPEN=1;WebSocket.CLOSING=2;WebSocket.CLOSED=3;WebSocket.__tasks=[];WebSocket.__initialize=
function(){if(WebSocket.__swfLocation)window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation;if(window.WEB_SOCKET_SWF_LOCATION){var b=document.createElement("div");b.id="webSocketContainer";b.style.position="absolute";if(WebSocket.__isFlashLite()){b.style.left="0px";b.style.top="0px"}else{b.style.left="-100px";b.style.top="-100px"}var e=document.createElement("div");e.id="webSocketFlash";b.appendChild(e);document.body.appendChild(b);v.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","9.0.0",
null,{bridgeName:"webSocket"},{hasPriority:true},null,function(h){h.success||c.error("[WebSocket] swfobject.embedSWF failed")});i.addInitializationCallback("webSocket",function(){try{WebSocket.__flash=i.webSocket.root();WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var h=0;h<WebSocket.__tasks.length;++h)WebSocket.__tasks[h]();WebSocket.__tasks=[]}catch(p){c.error("[WebSocket] "+p.toString())}})}else c.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")};
WebSocket.__addTask=function(b){WebSocket.__flash?b():WebSocket.__tasks.push(b)};WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return false;var b=window.navigator.mimeTypes["application/x-shockwave-flash"];if(!b||!b.enabledPlugin||!b.enabledPlugin.filename)return false;return b.enabledPlugin.filename.match(/flashlite/i)?true:false};window.webSocketLog=function(b){c.log(decodeURIComponent(b))};window.webSocketError=function(b){c.error(decodeURIComponent(b))};
window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",WebSocket.__initialize,false):window.attachEvent("onload",WebSocket.__initialize))}else c.error("Flash Player is not installed.")}})()})();
(function(){var i,y,v,a,c=Array.prototype.slice;v=nodudio.socket=new nodudio.EventEmitter;a=new io.Socket(location.hostname,{transports:["websocket","htmlfile","xhr-multipart","xhr-polling","jsonp-polling"]});a.connect();y=0;i={};v.request=function(){var b,e;b=c.call(arguments,0);if(typeof b[b.length-1]==="function"){e=y++;i[e]=b.pop();b.unshift(e)}return a.send(b.join(":"))};v.write=function(b){return a.send(b)};a.on("message",function(b){var e,h,p;try{if(p=b.indexOf("|")){h=b.slice(p+1);b=b.slice(0,
p).split(":")}else b=b.split(":");if(b[0]==="save")return v.emit("save",b[1],b[2],JSON.parse(h));else if(e=i[b[0]]){i[b[0]]=undefined;return e(h)}}catch(t){if(console&&console.error)return console.error(t)}})})();
